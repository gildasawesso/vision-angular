<div class="d-flex align-items-center">
  <mat-form-field appearance="outline" class="mr-2">
    <mat-label>Classe sélectionnée</mat-label>
    <mat-select [formControl]="classroomSelected" [compareWith]="utils.common.compareFn">
      <mat-option [value]="null">Toutes les classes</mat-option>
      <mat-option *ngFor="let classroom of classrooms; let i = index;" [value]="classroom">{{classroom.name}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Élève sélectionné</mat-label>
    <mat-select [formControl]="studentSelected" [compareWith]="utils.common.compareFn">
      <mat-option [value]="null">Tous les élèves</mat-option>
      <mat-option *ngFor="let student of students" [value]="student">{{student.lastname | uppercase}} {{student.firstname | titlecase}}</mat-option>
    </mat-select>
  </mat-form-field>

  <h4 class="mx-3">Filtre </h4>
  <mat-form-field appearance="outline" class="mr-2">
    <mat-label>Date de début</mat-label>
    <input matInput [matDatepicker]="startDatePicker" [formControl]="filterStartDate"/>
    <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
    <mat-datepicker #startDatePicker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Date de fin</mat-label>
    <input matInput [matDatepicker]="endDatePicker" [formControl]="filterEndDate"/>
    <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
    <mat-datepicker #endDatePicker></mat-datepicker>
  </mat-form-field>

  <button mat-icon-button color="accent" class="mb-2" (click)="reset()">
    <mat-icon>refresh</mat-icon>
  </button>

  <div class="d-flex ml-auto ml-4 mb-3">
    <button mat-flat-button color="accent" (click)="add()">Ajouter une contribution</button>
  </div>
</div>

<div class="total-payment text-center">{{totalPayments | spaced: 'FCFA'}}</div>

<ngx-datatable class="material ngx-datatable fixed-header scroll-vertical mt-1"
               [rows]="rows"
               [columns]="columns"
               columnMode="force"
               [headerHeight]="50"
               [footerHeight]="50"
               [limit]="5"
              rowHeight="auto">
  <ng-template #studentFullName let-row="row">{{row.student.lastname}} {{row.student.firstname}}</ng-template>
  <ng-template #classroom let-row="row">{{row.classroom.name}}</ng-template>
  <ng-template #fees let-row="row">
    <li class="text-capitalize" *ngFor="let fee of row?.fees">{{fee?.fee?.name}}</li>
  </ng-template>
  <ng-template #actions let-row="row">
    <button (click)="printReceipt(row)" color="primary" mat-icon-button><mat-icon>print</mat-icon></button>
    <button (click)="edit(row)" color="accent" mat-icon-button><mat-icon>edit</mat-icon></button>
    <button (click)="delete(row)" color="warn" mat-icon-button><mat-icon>delete</mat-icon></button>
  </ng-template>
</ngx-datatable>

